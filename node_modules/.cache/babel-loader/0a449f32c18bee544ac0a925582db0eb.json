{"ast":null,"code":"import _defineProperty from \"/media/thet/Data/PADC/PADC 7/Repos/Day 16 - Redux Intro/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/media/thet/Data/PADC/PADC 7/Repos/Day 16 - Redux Intro/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/thet/Data/PADC/PADC 7/Repos/Day 16 - Redux Intro/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/thet/Data/PADC/PADC 7/Repos/Day 16 - Redux Intro/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/thet/Data/PADC/PADC 7/Repos/Day 16 - Redux Intro/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/thet/Data/PADC/PADC 7/Repos/Day 16 - Redux Intro/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/thet/Data/PADC/PADC 7/Repos/Day 16 - Redux Intro/react-blog-intro/src/index.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router, Redirect, Route, Link } from \"react-router-dom\";\nimport LoginForm from \"./components/LoginForm\";\nimport RegisterForm from \"./components/RegisterForm\";\nimport NewArticleForm from \"./components/NewArticleForm\";\nimport ArticleList from \"./components/ArticleList\";\nimport ArticleDetail from \"./components/ArticleDetail\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.registerEvent = function (user, cb) {\n      var users = _this.state.users;\n      var result = users.find(function (obj) {\n        return obj.name === user.name || obj.email === user.email;\n      });\n\n      if (result === undefined) {\n        console.log(\"add new user\", user);\n        user.id = users.length + 1;\n        users.push(user);\n\n        _this.setStateAndLocalStorage(\"users\", users);\n\n        cb();\n      } else {\n        alert(\"User already existed\");\n      }\n    };\n\n    _this.addNewArticleEvent = function (article) {\n      var articles = _this.state.articles;\n      article.created_by = _this.state.user.id;\n      console.log(article);\n      articles.push(article);\n\n      _this.setStateAndLocalStorage(\"articles\", articles);\n    };\n\n    _this.loginEvent = function (user, cb) {\n      var users = _this.state.users;\n      var result = users.find(function (obj) {\n        return obj.name === user.name && obj.password === user.password;\n      });\n\n      if (result) {\n        console.log(result);\n\n        _this.setState({\n          isLogin: true,\n          user: result\n        });\n\n        cb();\n      } else {\n        alert(\"Wrong password\");\n      }\n    };\n\n    _this.logoutEvent = function () {\n      _this.setState({\n        isLogin: false,\n        user: {}\n      });\n    };\n\n    _this.state = {\n      isLogin: false,\n      user: {},\n      users: [],\n      articles: [],\n      currentArticleIndex: {}\n    };\n\n    _this.localStorageRetrieval(\"users\");\n\n    _this.localStorageRetrieval(\"articles\");\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"localStorageRetrieval\",\n    value: function localStorageRetrieval(key) {\n      var data = localStorage.getItem(key);\n\n      if (data !== null) {\n        this.setState(_defineProperty({}, key, JSON.parse(data)));\n      }\n    }\n  }, {\n    key: \"setStateAndLocalStorage\",\n    value: function setStateAndLocalStorage(key, value) {\n      this.setState(_defineProperty({}, key, value));\n      localStorage.setItem(key, JSON.stringify(value));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Welcome to My Blog!\"), React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Home\"), \" | \", React.createElement(Link, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"SignIn\"), this.state.isLogin && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"| \", React.createElement(Link, {\n        to: \"/article/new\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"New Article\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })), React.createElement(Route, {\n        path: \"/register\",\n        render: function render(props) {\n          return React.createElement(RegisterForm, Object.assign({}, props, {\n            registerEvent: _this2.registerEvent,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/login\",\n        render: function render(props) {\n          return React.createElement(LoginForm, Object.assign({}, props, {\n            loginEvent: _this2.loginEvent,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/article/new\",\n        render: function render(props) {\n          return _this2.state.isLogin ? React.createElement(NewArticleForm, Object.assign({}, props, {\n            addNewArticleEvent: _this2.addNewArticleEvent,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 133\n            },\n            __self: this\n          })) : React.createElement(Redirect, {\n            to: {\n              pathname: \"/login\",\n              state: {\n                from: props.location\n              }\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/article/:id\",\n        exact: true,\n        render: function render(props) {\n          return React.createElement(ArticleDetail, {\n            articles: _this2.state.articles,\n            users: _this2.state.users,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/\",\n        exact: true,\n        render: function render(props) {\n          return React.createElement(ArticleList, {\n            articles: _this2.state.articles,\n            users: _this2.state.users,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nvar rootElement = document.getElementById(\"root\");\nReactDOM.render(React.createElement(App, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 174\n  },\n  __self: this\n}), rootElement);","map":{"version":3,"sources":["/media/thet/Data/PADC/PADC 7/Repos/Day 16 - Redux Intro/react-blog-intro/src/index.js"],"names":["React","ReactDOM","BrowserRouter","Router","Redirect","Route","Link","LoginForm","RegisterForm","NewArticleForm","ArticleList","ArticleDetail","App","props","registerEvent","user","cb","users","state","result","find","obj","name","email","undefined","console","log","id","length","push","setStateAndLocalStorage","alert","addNewArticleEvent","article","articles","created_by","loginEvent","password","setState","isLogin","logoutEvent","currentArticleIndex","localStorageRetrieval","key","data","localStorage","getItem","JSON","parse","value","setItem","stringify","pathname","from","location","Component","rootElement","document","getElementById","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport LoginForm from \"./components/LoginForm\";\nimport RegisterForm from \"./components/RegisterForm\";\n\nimport NewArticleForm from \"./components/NewArticleForm\";\nimport ArticleList from \"./components/ArticleList\";\nimport ArticleDetail from \"./components/ArticleDetail\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLogin: false,\n      user: {},\n      users: [],\n      articles: [],\n      currentArticleIndex: {}\n    };\n    this.localStorageRetrieval(\"users\");\n    this.localStorageRetrieval(\"articles\");\n  }\n\n  componentDidMount() {\n    \n  }\n\n  registerEvent = (user, cb) => {\n    const users = this.state.users;\n\n    const result = users.find(\n      obj => obj.name === user.name || obj.email === user.email\n    );\n\n    if (result === undefined) {\n      console.log(\"add new user\", user);\n      user.id = users.length + 1;\n      users.push(user);\n      this.setStateAndLocalStorage(\"users\", users);\n      cb();\n    } else {\n      alert(\"User already existed\");\n    }\n  };\n\n  addNewArticleEvent = article => {\n    const articles = this.state.articles;\n    article.created_by = this.state.user.id;\n    console.log(article);\n    articles.push(article);\n    this.setStateAndLocalStorage(\"articles\", articles);\n  };\n\n  loginEvent = (user, cb) => {\n    const users = this.state.users;\n    const result = users.find(\n      obj => obj.name === user.name && obj.password === user.password\n    );\n\n    if (result) {\n      console.log(result);\n      this.setState({\n        isLogin: true,\n        user: result\n      });\n      cb();\n    } else {\n      alert(\"Wrong password\");\n    }\n  };\n\n  logoutEvent = () => {\n    this.setState({\n      isLogin: false,\n      user: {}\n    });\n  };\n\n  localStorageRetrieval(key) {\n    const data = localStorage.getItem(key);\n    \n    if (data !== null) {\n      this.setState({\n        [key]: JSON.parse(data)\n      });\n    }\n  }\n\n  setStateAndLocalStorage(key, value) {\n    this.setState({\n      [key]: value\n    });\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n\n  render() {\n    return (\n      <Router>\n        <div className=\"App\">\n          <h1>Welcome to My Blog!</h1>\n          <Link to=\"/\">Home</Link> | <Link to=\"/login\">SignIn</Link>\n          {this.state.isLogin && (\n            <React.Fragment>\n              | <Link to=\"/article/new\">New Article</Link>\n            </React.Fragment>\n          )}\n          <br />\n        </div>\n        <Route\n          path=\"/register\"\n          render={props => (\n            <RegisterForm {...props} registerEvent={this.registerEvent} />\n          )}\n        />\n        <Route\n          path=\"/login\"\n          render={props => (\n            <LoginForm {...props} loginEvent={this.loginEvent} />\n          )}\n        />\n        <Route\n          path=\"/article/new\"\n          render={props =>\n            this.state.isLogin ? (\n              <NewArticleForm\n                {...props}\n                addNewArticleEvent={this.addNewArticleEvent}\n              />\n            ) : (\n              <Redirect\n                to={{\n                  pathname: \"/login\",\n                  state: { from: props.location }\n                }}\n              />\n            )\n          }\n        />\n\n        <Route\n          path=\"/article/:id\"\n          exact\n          render={props => (\n            <ArticleDetail\n              articles={this.state.articles}\n              users={this.state.users}\n            />\n          )}\n        />\n\n        <Route\n          path=\"/\"\n          exact\n          render={props => (\n            <ArticleList\n              articles={this.state.articles}\n              users={this.state.users}\n            />\n          )}\n        />\n      </Router>\n    );\n  }\n}\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"]},"metadata":{},"sourceType":"module"}