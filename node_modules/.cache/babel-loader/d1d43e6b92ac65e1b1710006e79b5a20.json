{"ast":null,"code":"import _defineProperty from \"/media/thet/Data/PADC/PADC 7/Repos/Day 17 - Redux Practical/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/media/thet/Data/PADC/PADC 7/Repos/Day 17 - Redux Practical/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/thet/Data/PADC/PADC 7/Repos/Day 17 - Redux Practical/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/thet/Data/PADC/PADC 7/Repos/Day 17 - Redux Practical/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/thet/Data/PADC/PADC 7/Repos/Day 17 - Redux Practical/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/thet/Data/PADC/PADC 7/Repos/Day 17 - Redux Practical/react-blog-intro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/thet/Data/PADC/PADC 7/Repos/Day 17 - Redux Practical/react-blog-intro/src/index.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router, Redirect, Route, Link } from \"react-router-dom\";\nimport LoginForm from \"./components/LoginForm\";\nimport RegisterForm from \"./components/RegisterForm\";\nimport NewArticleForm from \"./components/NewArticleForm\";\nimport ArticleList from \"./components/ArticleList\";\nimport ArticleDetail from \"./components/ArticleDetail\";\nimport DeleteArticle from \"./components/DeleteArticle\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.registerEvent = function (user, cb) {\n      var users = _this.state.users;\n      var result = users.find(function (obj) {\n        return obj.name === user.name || obj.email === user.email;\n      });\n\n      if (result === undefined) {\n        user.id = users.length + 1;\n        users.push(user);\n\n        _this.setStateAndLocalStorage(\"users\", users);\n\n        cb();\n      } else {\n        alert(\"User already existed\");\n      }\n    };\n\n    _this.addNewArticleEvent = function (article) {\n      var articles = _this.state.articles; //article.id = articles.length + 1;\n\n      var mapped_article_id = articles.map(function (i) {\n        return parseInt(i.id);\n      });\n      var max = Math.max(mapped_article_id);\n      article.id = max + 1;\n      console.log(mapped_article_id, max, articl.id);\n      article.created_by = _this.state.user.id;\n      articles.push(article);\n\n      _this.setStateAndLocalStorage(\"articles\", articles);\n    };\n\n    _this.deleteArticleEvent = function (id, cb) {\n      var articles = _this.state.articles;\n      var newArticles = articles.filter(function (item) {\n        return item.id !== id;\n      });\n\n      _this.setStateAndLocalStorage('articles', newArticles);\n\n      cb();\n    };\n\n    _this.loginEvent = function (user, cb) {\n      var users = _this.state.users;\n      var result = users.find(function (obj) {\n        return obj.name === user.name && obj.password === user.password;\n      });\n\n      if (result) {\n        _this.setState({\n          isLogin: true,\n          user: result\n        });\n\n        cb();\n      } else {\n        alert(\"Wrong password\");\n      }\n    };\n\n    _this.logoutEvent = function () {\n      _this.setState({\n        isLogin: false,\n        user: {}\n      });\n    };\n\n    _this.state = {\n      isLogin: false,\n      user: {},\n      users: [],\n      articles: [],\n      currentArticleIndex: {}\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.localStorageRetrieval(\"users\");\n      this.localStorageRetrieval(\"articles\");\n    }\n  }, {\n    key: \"localStorageRetrieval\",\n    value: function localStorageRetrieval(key) {\n      var data = localStorage.getItem(key);\n\n      if (data !== null) {\n        this.setState(_defineProperty({}, key, JSON.parse(data)));\n      }\n    }\n  }, {\n    key: \"setStateAndLocalStorage\",\n    value: function setStateAndLocalStorage(key, value) {\n      this.setState(_defineProperty({}, key, value));\n      localStorage.setItem(key, JSON.stringify(value));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Welcome to My Blog!\"), React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Home\"), \" | \", React.createElement(Link, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"SignIn\"), this.state.isLogin && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"| \", React.createElement(Link, {\n        to: \"/article/new\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"New Article\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      })), React.createElement(Route, {\n        path: \"/register\",\n        render: function render(props) {\n          return React.createElement(RegisterForm, Object.assign({}, props, {\n            registerEvent: _this2.registerEvent,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/login\",\n        render: function render(props) {\n          return React.createElement(LoginForm, Object.assign({}, props, {\n            loginEvent: _this2.loginEvent,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/article/new\",\n        render: function render(props) {\n          return _this2.state.isLogin ? React.createElement(NewArticleForm, Object.assign({}, props, {\n            addNewArticleEvent: _this2.addNewArticleEvent,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 143\n            },\n            __self: this\n          })) : React.createElement(Redirect, {\n            to: {\n              pathname: \"/login\",\n              state: {\n                from: props.location\n              }\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/articles/:id\",\n        exact: true,\n        render: function render(props) {\n          return React.createElement(ArticleDetail, Object.assign({}, props, {\n            articles: _this2.state.articles,\n            users: _this2.state.users,\n            currentUser: _this2.state.user,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 162\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/articles/delete/:id\",\n        exact: true,\n        render: function render(props) {\n          return React.createElement(DeleteArticle, Object.assign({}, props, {\n            articles: _this2.state.articles,\n            users: _this2.state.users,\n            currentUser: _this2.state.user,\n            deleteArticleEvent: _this2.deleteArticleEvent,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/\",\n        exact: true,\n        render: function render(props) {\n          return React.createElement(ArticleList, {\n            articles: _this2.state.articles,\n            users: _this2.state.users,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nvar rootElement = document.getElementById(\"root\");\nReactDOM.render(React.createElement(App, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 201\n  },\n  __self: this\n}), rootElement);","map":{"version":3,"sources":["/media/thet/Data/PADC/PADC 7/Repos/Day 17 - Redux Practical/react-blog-intro/src/index.js"],"names":["React","ReactDOM","BrowserRouter","Router","Redirect","Route","Link","LoginForm","RegisterForm","NewArticleForm","ArticleList","ArticleDetail","DeleteArticle","App","props","registerEvent","user","cb","users","state","result","find","obj","name","email","undefined","id","length","push","setStateAndLocalStorage","alert","addNewArticleEvent","article","articles","mapped_article_id","map","i","parseInt","max","Math","console","log","articl","created_by","deleteArticleEvent","newArticles","filter","item","loginEvent","password","setState","isLogin","logoutEvent","currentArticleIndex","localStorageRetrieval","key","data","localStorage","getItem","JSON","parse","value","setItem","stringify","pathname","from","location","Component","rootElement","document","getElementById","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport LoginForm from \"./components/LoginForm\";\nimport RegisterForm from \"./components/RegisterForm\";\n\nimport NewArticleForm from \"./components/NewArticleForm\";\nimport ArticleList from \"./components/ArticleList\";\nimport ArticleDetail from \"./components/ArticleDetail\";\nimport DeleteArticle from \"./components/DeleteArticle\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLogin: false,\n      user: {},\n      users: [],\n      articles: [],\n      currentArticleIndex: {}\n    };\n  }\n\n  componentDidMount() {\n    this.localStorageRetrieval(\"users\");\n    this.localStorageRetrieval(\"articles\");\n  }\n\n  registerEvent = (user, cb) => {\n    const users = this.state.users;\n\n    const result = users.find(\n      obj => obj.name === user.name || obj.email === user.email\n    );\n\n    if (result === undefined) {\n      user.id = users.length + 1;\n      users.push(user);\n      this.setStateAndLocalStorage(\"users\", users);\n      cb();\n    } else {\n      alert(\"User already existed\");\n    }\n  };\n\n  addNewArticleEvent = article => {\n    const articles = this.state.articles;\n    //article.id = articles.length + 1;\n    \n    const mapped_article_id = articles.map(i => parseInt(i.id));\n    const max = Math.max(mapped_article_id);\n    \n    article.id = max + 1;\n    console.log(mapped_article_id,max,articl.id);\n    article.created_by = this.state.user.id;\n    articles.push(article);\n    this.setStateAndLocalStorage(\"articles\", articles);\n  };\n\n  deleteArticleEvent = (id,cb) =>{\n    const articles = this.state.articles;\n    const newArticles =  articles.filter( item => item.id !== id);\n    this.setStateAndLocalStorage('articles',newArticles);\n    cb();\n  }\n\n  loginEvent = (user, cb) => {\n    const users = this.state.users;\n    const result = users.find(\n      obj => obj.name === user.name && obj.password === user.password\n    );\n\n    if (result) {\n      this.setState({\n        isLogin: true,\n        user: result\n      });\n      cb();\n    } else {\n      alert(\"Wrong password\");\n    }\n  };\n\n  logoutEvent = () => {\n    this.setState({\n      isLogin: false,\n      user: {}\n    });\n  };\n\n  localStorageRetrieval(key) {\n    const data = localStorage.getItem(key);\n    if (data !== null) {\n      this.setState({\n        [key]: JSON.parse(data)\n      });\n    }\n  }\n\n  setStateAndLocalStorage(key, value) {\n    this.setState({\n      [key]: value\n    });\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n\n  render() {\n    return (\n      <Router>\n        <div className=\"App\">\n          <h1>Welcome to My Blog!</h1>\n          <Link to=\"/\">Home</Link> | <Link to=\"/login\">SignIn</Link>\n          {this.state.isLogin && (\n            <React.Fragment>\n              | <Link to=\"/article/new\">New Article</Link>\n            </React.Fragment>\n          )}\n          <br />\n        </div>\n        <Route\n          path=\"/register\"\n          render={props => (\n            <RegisterForm {...props} registerEvent={this.registerEvent} />\n          )}\n        />\n        <Route\n          path=\"/login\"\n          render={props => (\n            <LoginForm {...props} loginEvent={this.loginEvent} />\n          )}\n        />\n        <Route\n          path=\"/article/new\"\n          render={props =>\n            this.state.isLogin ? (\n              <NewArticleForm\n                {...props}\n                addNewArticleEvent={this.addNewArticleEvent}\n              />\n            ) : (\n              <Redirect\n                to={{\n                  pathname: \"/login\",\n                  state: { from: props.location }\n                }}\n              />\n            )\n          }\n        />\n\n        <Route\n          path=\"/articles/:id\"\n          exact\n          render={props => (\n            <ArticleDetail\n              {...props}\n              articles={this.state.articles}\n              users={this.state.users}\n              currentUser = {this.state.user}\n            />\n          )}\n        />\n\n        <Route\n          path=\"/articles/delete/:id\"\n          exact\n          render={props => (\n            <DeleteArticle\n              {...props}\n              articles={this.state.articles}\n              users={this.state.users}\n              currentUser = {this.state.user}\n              deleteArticleEvent = {this.deleteArticleEvent}\n            />\n          )}\n        />\n\n\n        <Route\n          path=\"/\"\n          exact\n          render={props => (\n            <ArticleList\n              articles={this.state.articles}\n              users={this.state.users}\n            />\n          )}\n        />\n      </Router>\n    );\n  }\n}\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"]},"metadata":{},"sourceType":"module"}